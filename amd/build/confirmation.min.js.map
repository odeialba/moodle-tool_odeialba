{"version":3,"sources":["../src/confirmation.js"],"names":["init","deletelink","document","querySelector","addEventListener","e","preventDefault","anchor","target","closest","deleteNotification","getAttribute","href","require","str","notification","get_strings","component","done","s","confirm","window","location","fail","exception"],"mappings":"gJAyBoB,QAAPA,CAAAA,IAAO,EAAM,CACtB,GAAMC,CAAAA,CAAU,CAAGC,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAAnB,CAEA,GAAIF,CAAJ,CAAgB,CACZA,CAAU,CAACG,gBAAX,CAA4B,OAA5B,CAAqC,SAACC,CAAD,CAAO,CACxCA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,CAAM,CAAGF,CAAC,CAACG,MAAF,CAASC,OAAT,CAAiB,GAAjB,CAAf,CAEA,GAAIF,CAAJ,CAAY,CACRG,CAAkB,CAACH,CAAM,CAACI,YAAP,CAAoB,MAApB,CAAD,CACrB,CACJ,CAPD,CAQH,CACJ,C,CAOD,GAAMD,CAAAA,CAAkB,CAAG,SAACE,CAAD,CAAU,CACjCC,OAAO,CAAC,CAAC,UAAD,CAAa,mBAAb,CAAD,CAAoC,SAASC,CAAT,CAAcC,CAAd,CAA4B,CACnED,CAAG,CAACE,WAAJ,CAAgB,CACZ,CAAC,IAAQ,QAAT,CADY,CAEZ,CAAC,IAAQ,eAAT,CAA0BC,SAAS,CAAG,eAAtC,CAFY,CAGZ,CAAC,IAAQ,KAAT,CAHY,CAIZ,CAAC,IAAQ,IAAT,CAJY,CAAhB,EAKGC,IALH,CAKQ,SAASC,CAAT,CAAY,CAChBJ,CAAY,CAACK,OAAb,CAAqBD,CAAC,CAAC,CAAD,CAAtB,CAA2BA,CAAC,CAAC,CAAD,CAA5B,CAAiCA,CAAC,CAAC,CAAD,CAAlC,CAAuCA,CAAC,CAAC,CAAD,CAAxC,CAA6C,UAAW,CACpDE,MAAM,CAACC,QAAP,CAAgBV,IAAhB,CAAuBA,CAC1B,CAFD,CAGH,CATD,EASGW,IATH,CASQR,CAAY,CAACS,SATrB,CAUH,CAXM,CAYV,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * tool_odeialba prepare data for renderer.\n *\n * @package    tool_odeialba\n * @module     tool_odeialba/confirmation\n * @copyright  2021 Odei Alba\n * @author     Odei Alba <odeialba@odeialba.com>\n * @link       https://www.odeialba.com\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nexport const init = () => {\n    const deletelink = document.querySelector('[data-action=\"delete\"]');\n\n    if (deletelink) {\n        deletelink.addEventListener('click', (e) => {\n            e.preventDefault();\n            const anchor = e.target.closest('a');\n\n            if (anchor) {\n                deleteNotification(anchor.getAttribute('href'));\n            }\n        });\n    }\n};\n\n/**\n * Display confirmation dialogue\n *\n * @param {String} href\n */\nconst deleteNotification = (href) => {\n    require(['core/str', 'core/notification'], function(str, notification) {\n        str.get_strings([\n            {'key' : 'delete'},\n            {'key' : 'confirmdelete', component : 'tool_odeialba'},\n            {'key' : 'yes'},\n            {'key' : 'no'},\n        ]).done(function(s) {\n            notification.confirm(s[0], s[1], s[2], s[3], function() {\n                window.location.href = href;\n            });\n        }).fail(notification.exception);\n    });\n};\n"],"file":"confirmation.min.js"}